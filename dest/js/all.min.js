var config={apiKey:"AIzaSyAKzyUWsDXRQzIJesKLpl9Ox1d757pbLRc",authDomain:"tptrashcan.firebaseapp.com",databaseURL:"https://tptrashcan.firebaseio.com",storageBucket:"tptrashcan.appspot.com"};firebase.initializeApp(config);var database=firebase.database(),defaultLocationLatitude=25.082169,defaultLocationLongitude=121.513012,currentLocationLatitude=defaultLocationLatitude,currentLocationLongitude=defaultLocationLongitude,trashIcon=L.icon({iconUrl:"img/trash.png"}),map=L.map("map").setView([currentLocationLatitude,currentLocationLongitude],16);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(map),firebase.database().ref("results/").on("value",function(t){result=t.val();for(var a=0;a<result.length;a++)addMarker(result[a])});var addMarker=function(t){L.marker([t.latitude,t.longitude],{icon:trashIcon}).addTo(map).bindPopup("<h4>"+t.address+"</h4>")};function getLocation(){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(t){currentLocationLatitude=t.coords.latitude,currentLocationLongitude=t.coords.longitude},function(t){alert({0:"不明原因錯誤",1:"使用者拒絕提供位置資訊",2:"無法取得位置資訊",3:"位置查詢逾時"}[t.code]),console.log("code="+t.code+" "+t.message)},{enableAcuracy:!1,maximumAge:0,timeout:6e5})}else alert("此瀏覽器不支援地理定位功能!")}function initMap(){getLocation()}