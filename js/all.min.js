function getLocation(){function e(e){currentLocationLatitude=e.coords.latitude,currentLocationLongitude=e.coords.longitude,currentMarker()}function t(e){var t={0:"不明原因錯誤",1:"使用者拒絕提供位置資訊",2:"無法取得位置資訊",3:"位置查詢逾時"};alert(t[e.code]),console.log("code="+e.code+" "+e.message)}if(navigator.geolocation){var o={enableAcuracy:!1,maximumAge:0,timeout:6e5};navigator.geolocation.getCurrentPosition(e,t,o)}else alert("此瀏覽器不支援地理定位功能!")}function initMap(){var e={center:{lat:currentLocationLatitude,lng:currentLocationLongitude},zoom:17,mapTypeId:google.maps.MapTypeId.ROADMAP};map=new google.maps.Map(document.getElementById("map"),e),getLocation()}function currentMarker(){var e=new GeolocationMarker(map);e.setCircleOptions({fillColor:"#808080"}),google.maps.event.addListenerOnce(e,"position_changed",function(){map.setCenter(this.getPosition())}),google.maps.event.addListener(e,"geolocation_error",function(e){alert("無法取得位置資訊. "+e.message)}),e.setMap(map)}function getTrashCanData(){firebase.database().ref("results/").on("value",function(e){result=e.val();for(var t=0;t<result.length;t++)addMarker(result[t])})}var config={apiKey:"AIzaSyAKzyUWsDXRQzIJesKLpl9Ox1d757pbLRc",authDomain:"tptrashcan.firebaseapp.com",databaseURL:"https://tptrashcan.firebaseio.com",storageBucket:"tptrashcan.appspot.com"};firebase.initializeApp(config);var defaultLocationLatitude=25.0339031,defaultLocationLongitude=121.5645098,currentLocationLatitude=defaultLocationLatitude,currentLocationLongitude=defaultLocationLongitude,map,mc,result=[];getTrashCanData();var markers=[],image="img/pin.png";google.maps.InfoWindow.prototype.isOpen=function(){var e=this.getMap();return null!==e&&"undefined"!=typeof e};var addMarker=function(e){var t=new google.maps.Marker({position:new google.maps.LatLng(e.latitude,e.longitude),map:map,title:e.address,icon:image});t.infowindow=new google.maps.InfoWindow({content:"<h4>"+e.region+'</h4><p><img src="https://maps.googleapis.com/maps/api/streetview?size=400x180&location='+e.latitude+","+e.longitude+'&fov=90&heading=180&pitch=10"></p><h4>'+e.address+"</h4>"}),markers.push(t),google.maps.event.addListener(t,"click",function(e){map.panTo(this.position);for(var o=0;o<markers.length;o++)markers[o].infowindow.isOpen()&&markers[o].infowindow.close();this.infowindow.open(map,t)})};
//# sourceMappingURL=all.min.js.map