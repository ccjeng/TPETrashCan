function getLocation(){function o(o){currentLocationLatitude=o.coords.latitude,currentLocationLongitude=o.coords.longitude,console.log("successCallback = "+currentLocationLatitude+","+currentLocationLongitude),map.panTo(new google.maps.LatLng(currentLocationLatitude,currentLocationLongitude))}function e(o){var e={0:"不明原因錯誤",1:"使用者拒絕提供位置資訊",2:"無法取得位置資訊",3:"位置查詢逾時"};console.log(e[o.code]),console.log("code="+o.code+" "+o.message)}if(navigator.geolocation){var t=navigator.geolocation,n={enableAcuracy:!1,maximumAge:0,timeout:6e5};t.getCurrentPosition(o,e,n)}else alert("此瀏覽器不支援地理定位功能!")}function initMap(){getLocation(),console.log(currentLocationLatitude+","+currentLocationLongitude);var o={center:{lat:currentLocationLatitude,lng:currentLocationLongitude},zoom:17,mapTypeId:google.maps.MapTypeId.ROADMAP};map=new google.maps.Map(document.getElementById("map"),o)}Parse.initialize("5fzYdG6YMpMPKBNSqvzhEL1OVoXgcVvlCAghW09Q","NK9ycOzWNik9d6axOAndjYXwRuycfX2qTIyidyxV");var defaultLocationLatitude=25.0339031,defaultLocationLongitude=121.5645098,currentLocationLatitude=defaultLocationLatitude,currentLocationLongitude=defaultLocationLongitude,map,mc,result=[],processCallback=function(o){if(result=result.concat(o),1e3==o.length)return void process(o[o.length-1].id);for(var e=0;e<result.length;e++)addMarker(result[e]);mc=new MarkerClusterer(map,markers,{gridSize:80,maxZoom:14})},process=function(o){var e=new Parse.Query("TPE201509");o&&e.greaterThan("objectId",o),e.limit(1e3),e.ascending("objectId"),e.find().then(function(o){processCallback(o)},function(o){console.log("Error: "+o.code+" "+o.message)})};process(!1);var markers=[],image="img/pin.png",addMarker=function(o){var e=new google.maps.Marker({position:new google.maps.LatLng(o.get("location").latitude,o.get("location").longitude),map:map,title:o.get("road")+o.get("address"),icon:image});e.infowindow=new google.maps.InfoWindow({content:"<h4>"+o.get("region")+'</h4><p><img src="https://maps.googleapis.com/maps/api/streetview?size=400x180&location='+o.get("location").latitude+","+o.get("location").longitude+'&fov=90&heading=180&pitch=10"></p><h4>'+o.get("road")+o.get("address")+"</h4>"}),markers.push(e),google.maps.event.addListener(e,"click",function(o){map.panTo(this.position),this.infowindow.open(map,e)})};
//# sourceMappingURL=all.min.js.map